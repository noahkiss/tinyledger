# Requirements Archive: v1.0 MVP

**Archived:** 2026-02-03
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: TinyLedger

**Defined:** 2026-01-24
**Core Value:** 10-second transaction entry that makes tax season painless

## v1 Requirements

Requirements for initial release. Each maps to roadmap phases.

### Workspaces

- [x] **WKSP-01**: User can create a new workspace with name and type (sole prop or volunteer org)
- [x] **WKSP-02**: User can edit workspace details (name, type, business info)
- [x] **WKSP-03**: User can upload workspace logo (enforced dimensions) or use 2-letter abbreviation
- [x] **WKSP-04**: User can set business details (name, address, phone, responsible party)
- [x] **WKSP-05**: User can set founded year to enable historical fiscal year views
- [x] **WKSP-06**: User can switch between workspaces via logo dropdown in header
- [x] **WKSP-07**: Last-used workspace remembered per device (localStorage)
- [x] **WKSP-08**: New workspaces include pre-seeded common tags (Schedule C categories)

### Transactions

- [x] **TXNS-01**: User can create income transaction with amount, date, payee, tags, description, payment method
- [x] **TXNS-02**: User can create expense transaction with amount, date, payee, tags, description, payment method
- [x] **TXNS-03**: User can select payment method (cash, card, check with check number)
- [x] **TXNS-04**: User can assign multiple tags with allocation percentages (must sum to 100%)
- [x] **TXNS-05**: User can edit existing transactions
- [x] **TXNS-06**: User can void transactions (keeps record, excludes from totals)
- [x] **TXNS-07**: User can delete only already-voided transactions (soft delete)
- [x] **TXNS-08**: System tracks full edit history for audit trail

### Predictive Entry

- [x] **PRED-01**: Payee field autocompletes from transaction history (fuzzy/substring matching)
- [x] **PRED-02**: Tag suggestions appear based on selected payee's history
- [x] **PRED-03**: Amount pre-fills based on payee match (optional, user can override)

### Input UX

- [x] **INUX-01**: Currency input auto-formats (adds $ sign, .00 if no decimal)
- [x] **INUX-02**: Date input accepts flexible formats (with/without slashes)
- [x] **INUX-03**: Date input includes mobile-friendly date picker
- [x] **INUX-04**: Percentage input for tag allocation is intuitive and validates sum
- [x] **INUX-05**: Warning displayed if date is >1 year in future (fat-finger protection)

### Recurring Transactions

- [x] **RCUR-01**: User can mark transaction as recurring with pattern (daily, weekly, bi-weekly, monthly, last Friday of month, etc.)
- [x] **RCUR-02**: Future recurring instances appear as "pending" in timeline
- [x] **RCUR-03**: Pending instances scoped to current fiscal year (option to view next FY)
- [x] **RCUR-04**: User can confirm/edit pending instance when it occurs
- [x] **RCUR-05**: User can void single pending instance (skip one occurrence)
- [x] **RCUR-06**: User can delete all future instances (cancel remainder of series)
- [x] **RCUR-07**: User can delete current and all future instances

### Attachments

- [x] **ATCH-01**: User can upload receipt attachment via file picker
- [x] **ATCH-02**: Attachments stored in workspace-namespaced filesystem directory
- [x] **ATCH-03**: User can view attachment full-size
- [x] **ATCH-04**: User can download attachment
- [x] **ATCH-05**: User can replace existing attachment
- [x] **ATCH-06**: Attachments auto-renamed smartly for bulk export (e.g., YYYY-MM-DD_Payee_Amount.ext)

### Timeline View

- [x] **TMLN-01**: Transaction feed displays for selected fiscal year
- [x] **TMLN-02**: Net Income YTD displayed prominently at top
- [x] **TMLN-03**: Large Income/Expense entry buttons accessible
- [x] **TMLN-04**: Visual timeline design with vertical line showing dates (Flowbite-inspired)
- [x] **TMLN-05**: "Scroll to current" auto-scrolls to most recent transaction
- [x] **TMLN-06**: Filter by payee (search)
- [x] **TMLN-07**: Filter by tags
- [x] **TMLN-08**: Filter by date range
- [x] **TMLN-09**: Filter by type (income/expense)
- [x] **TMLN-10**: Filter by payment method

### Fiscal Year

- [x] **FISC-01**: User can select fiscal year to view (dropdown/selector)
- [x] **FISC-02**: Fiscal year defaults to calendar year (Jan-Dec)
- [x] **FISC-03**: User can configure fiscal year start month in workspace settings
- [x] **FISC-04**: Historical fiscal years available back to founded year
- [x] **FISC-05**: Next fiscal year viewable (for recurring planning)

### Tags & Categories

- [x] **TAGS-01**: User can create tags on-the-fly during transaction entry
- [x] **TAGS-02**: Tags management page in settings (view, rename, merge, delete)
- [x] **TAGS-03**: Optional "lock tags" mode prevents new tag creation
- [x] **TAGS-04**: Pre-seeded tags based on IRS Schedule C categories

### Tax Configuration

- [x] **TAXC-01**: User can set federal tax bracket (pick from list or calculate from outside earnings)
- [~] **TAXC-02**: User can enter estimated outside earnings to suggest bracket — *Partial: bracket picker only*
- [x] **TAXC-03**: PA state tax rate pre-filled (3.07%)
- [x] **TAXC-04**: User can enter local EIT rate (required for sole prop workspaces)
- [x] **TAXC-05**: Tax notes field for user's reference (free-form with suggestions for what to include: agency links, forms, deadlines)

### Tax Calculations

- [x] **CALC-01**: Self-employment tax calculated correctly (15.3% of 92.35% of net income)
- [x] **CALC-02**: Federal income tax estimated based on bracket
- [x] **CALC-03**: PA state tax calculated (3.07% of net)
- [x] **CALC-04**: Local EIT calculated based on user-entered rate
- [x] **CALC-05**: Total estimated taxes YTD displayed
- [x] **CALC-06**: Projected year-end tax estimate displayed (based on current trajectory)
- [x] **CALC-07**: Recommended set-aside amount displayed (conservatively padded)

### Quarterly Payments

- [x] **QRTR-01**: Quarterly payment due dates visible in timeline (Apr 15, Jun 15, Sep 15, Jan 15)
- [x] **QRTR-02**: Projected quarterly payment amount displayed (refines as date approaches)
- [x] **QRTR-03**: User can mark quarterly payment as paid
- [x] **QRTR-04**: Paid quarterly payments show in timeline as completed

### Compliance Filings

- [x] **FIL-01**: Filings tab visible to both sole_prop and volunteer_org workspaces
- [x] **FIL-02**: Sole prop sees federal forms (Schedule C, SE, quarterly 1040-ES) and state forms (PA-40, quarterly PA-40 ES)
- [x] **FIL-03**: Volunteer org sees 990-N and state registration forms (BCO-10 for PA)
- [x] **FIL-04**: User can mark filings as complete with date filed, confirmation number, notes
- [x] **FIL-05**: Filings sorted by status (past-due first, then upcoming, then complete)

### Reports Dashboard

- [x] **RPTS-01**: Summary cards: YTD income, YTD expenses, net income, tax set-aside
- [x] **RPTS-02**: Chart: Net income over time (line chart)
- [x] **RPTS-03**: Chart: Spending by tag (pie or bar chart)
- [x] **RPTS-04**: Chart: Income vs expense by month (bar chart)

### Report Generation

- [x] **RGEN-01**: User can generate tax-ready report for selected date range
- [x] **RGEN-02**: Report grouped by tag with totals (CPA-friendly format)
- [x] **RGEN-03**: Report includes transaction details and receipt attachment counts
- [x] **RGEN-04**: PDF export with workspace branding (logo, business details)
- [x] **RGEN-05**: CSV export option for spreadsheet/tax software import

### Data Export & Import

- [x] **DATA-01**: User can export all data (JSON or CSV)
- [x] **DATA-02**: User can export all attachments as ZIP
- [x] **DATA-03**: User can import transactions from CSV
- [x] **DATA-04**: Import validates and shows preview before committing

### Data Integrity

- [x] **INTG-01**: Void-first deletion model (void is default, delete only on voided items)
- [x] **INTG-02**: All deletes are soft deletes (deleted_at timestamp, data retained)
- [x] **INTG-03**: Full edit history tracked for each transaction (audit trail)
- [x] **INTG-04**: SQLite configured with WAL mode and busy_timeout

### Mobile & PWA

- [x] **MOBL-01**: iOS home screen standalone mode configured (proper manifest, icons)
- [x] **MOBL-02**: Apple touch icons provided (180x180, 192x192, 512x512)
- [x] **MOBL-03**: Mobile-responsive design with large touch targets
- [x] **MOBL-04**: Mobile-first layout (works great on phone, adapts to desktop)

### Deployment

- [x] **DPLY-01**: Docker container with multi-stage build
- [x] **DPLY-02**: docker-compose.yml with volume mounts for data persistence
- [x] **DPLY-03**: Environment variable configuration (ORIGIN, DATA_DIR, BODY_SIZE_LIMIT)
- [x] **DPLY-04**: Documentation for SQLite backup strategy

## v2 Requirements (Deferred)

Tracked but not in v1.0 scope:

- **MILE-01 through MILE-03**: Mileage tracking
- **MTAX-01 through MTAX-02**: Multi-state tax support
- **ROCR-01 through ROCR-02**: Receipt OCR
- **OFFL-01 through OFFL-02**: Offline PWA

## Out of Scope

| Feature | Reason |
|---------|--------|
| User authentication | Self-hosted on Tailscale, internal domain only |
| Multi-user/collaboration | Single user, multiple workspaces model |
| Bank balance tracking | We track income/expenses for taxes, not account balances |
| Bank sync (Plaid) | Security liability, subscription costs, vendor lock-in |
| Bank reconciliation | Overkill for target audience |
| Double-entry accounting | Single-entry is sufficient for sole props |
| Invoicing | Scope creep, Wave/FreshBooks do this |
| Payroll | Complex compliance, state-specific rules |
| Multi-currency | Target audience is US/local |
| Push notifications | Over-engineered for self-hosted |

---

## Milestone Summary

**Shipped:** 79 of 79 v1 requirements (1 partial)

**Adjusted during implementation:**
- TAXC-02: Original requirement was "enter estimated outside earnings to suggest bracket" — implemented as bracket picker only (users manually select their bracket)

**Dropped:** None

**Coverage:**
- v1 requirements: 79 total
- Mapped to phases: 79
- Complete: 78
- Partial: 1 (TAXC-02)

---
*Archived: 2026-02-03 as part of v1.0 milestone completion*
